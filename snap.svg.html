<!DOCTYPE html>
<html>

<head>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
  <meta content="utf-8" http-equiv="encoding" />
  <link rel="stylesheet" type="text/css" href="/style.css" />
  <title>snap.svg</title>
  <script src="/snap.svg.js"></script>

</head>

<body style="height: 100%; width: 100%">
  <div style="height: 100%; width: 100%">
    <object style="height: 100%; width: 100%" id="svg"></object>
  </div>

  <script>
    var state2 = false;
    var torre1 = true;
    var s = Snap("#svg");
    //Archivo de diseño del plano 
    var name = "/LA FLORA 20-07-10 (1).svg";

    //archivo Json de la consulta por servicio Rest
    //Consumir dependencia axios, consumo web rest
    var name2 = {
      "estado": "Aprovado [A]",
      "mensaje": "Efecty",
      "listaId": [
        {
          "id": "L1305",
          "color": "#A0C0F8",
          "estado": "vendido mes actual"
        },
        {
          "id": "L1009",
          "color": "#7EABFA",
          "estado": "vendido"
        },
        {
          "id": "L1414",
          "color": "#F9F511",
          "estado": "opcionado"
        },
        {
          "id": "L1406",
          "color": "#1AED0C",
          "estado": "en sala(venta)"
        },
        {
          "id": "L1908",
          "color": "#FFFFFF",
          "estado": "por lanzar"
        },
        {
          "id": "L1108",
          "color": "#00244D",
          "estado": "Escriturado"
        },
        {
          "id": "L0302",
          "color": "#A0C0F8",
          "estado": "vendido mes actual"
        },
        {
          "id": "L1108",
          "color": "#7EABFA",
          "estado": "vendido"
        },
        {
          "id": "L1313",
          "color": "#F9F511",
          "estado": "opcionado"
        },
        {
          "id": "L1305",
          "color": "#1AED0C",
          "estado": "en sala(venta)"
        },
        {
          "id": "L1801",
          "color": "#FFFFFF",
          "estado": "por lanzar"
        },
        {
          "id": "L1002",
          "color": "#00244D",
          "estado": "Escriturado"
        }
      ]
    };

    //Carga del plano usando Snap
    var fragment = Snap.load(name, (data) => {
      //Asignación de colores a los apartamentos por estado 
      s.append(data);

      for (var i = 0; i < name2.listaId.length; i++) {
        var apto = document.getElementById(name2.listaId[i].id);
        apto.style.fill = name2.listaId[i].color;
        apto.style.opacity = "0.7 "
        apto.addEventListener('click', myFunc, false);
      }

      function myFunc() {
        for (var i = 0; i < name2.listaId.length; i++) {
          if(this.id == name2.listaId[i].id){
            //Mostrar información en globo de texto
            alert(name2.listaId[i].estado);
          }
        }
      }

      //Declaración de las capas del frente Torre1
      var frenteTorre1 = document.getElementById("layer5");
      var vistaFrenteTorre1 = document.getElementById("layer6");

      //función para remover las 2 capas del Frente Torre1
      const handleButtonClickFrenteTorre1Hide = () => {

        frenteTorre1.style.visibility = "hidden"
        vistaFrenteTorre1.style.visibility = "hidden"

        //frenteTorre1.remove()
        //vistaFrenteTorre1.remove()
        torre1 = false;
      };
      //función para mostrar las 2 capas del Frente Torre1
      const handleButtonClickFrenteTorre1Show = () => {

        frenteTorre1.style.visibility = "visible"
        vistaFrenteTorre1.style.visibility = "visible"

        //s.append(frenteTorre1)
        //s.append(vistaFrenteTorre1)
        torre1 = true
      };

      //Asignación del botón respecto a la base Torre 1
      var buttonBaseTorre1 = document.getElementById("L_ADM_TORRE_01_0");
      buttonBaseTorre1.onclick = handleButtonClickFrenteTorre1Show;

      //Asignación del botón respecto al frente Torre 1
      var buttonFrenteTorre1 = document.getElementById("L_ADM_TORRE_01_1");
      buttonFrenteTorre1.onclick = handleButtonClickFrenteTorre1Hide;

      //Declaración de las capas del frente Torre2
      var frenteTorre2 = document.getElementById("layer3");
      var vistaFrenteTorre2 = document.getElementById("layer4");

      //función para mostrar las 2 capas del Frente Torre2
      const handleButtonClickFrenteTorre2Show = () => {

        frenteTorre2.style.visibility = "visible"
        vistaFrenteTorre2.style.visibility = "visible"
        //s.append(frenteTorre2)
        //s.append(vistaFrenteTorre2)
        //validación de la superposición con el frente Torre1
        //if (torre1) {

        //  s.append(frenteTorre1)
        //  s.append(vistaFrenteTorre1)
        //}
      };
      //función para remover las 2 capas del Frente Torre2
      const handleButtonClickFrenteTorre2Hide = () => {

        frenteTorre2.style.visibility = "hidden"
        vistaFrenteTorre2.style.visibility = "hidden"

        //frenteTorre2.remove()
        //vistaFrenteTorre2.remove()
      };

      //Asignación del botón respecto a la base Torre 2
      var buttonBaseTorre2 = document.getElementById("L_ADM_TORRE_02_0");
      buttonBaseTorre2.onclick = handleButtonClickFrenteTorre2Show;

      //Asignación del botón respecto al frente Torre 2
      var buttonFrenteTorre2 = document.getElementById("L_ADM_TORRE_02_1");
      buttonFrenteTorre2.onclick = handleButtonClickFrenteTorre2Hide;

    });
  </script>
  <!--<svg></svg> -->
</body>

</html>